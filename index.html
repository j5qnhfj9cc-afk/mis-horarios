<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mis horarios</title>

  <style>
    :root{
      --bg:#ffffff; --text:#111; --muted:#666; --card:#fff; --border:#ddd; --thead:#fafafa; --code:#f6f6f6;
      --in-bg:#e8fff0; --in-border:#99e2b4;
      --out-bg:#fff5e8; --out-border:#ffd8a8;
    }
    html[data-theme="dark"]{
      --bg:#0b0f14; --text:#e8eef7; --muted:#a9b4c4; --card:#101826; --border:#243247; --thead:#0f1a2a; --code:#0f1a2a;
      --in-bg:#0f2a1a; --in-border:#2f8f57;
      --out-bg:#2a1b0f; --out-border:#b8742c;
    }
    body{background:var(--bg); color:var(--text); font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; margin:24px; line-height:1.35}
    .card{max-width:920px; margin:auto; padding:18px; border:1px solid var(--border); background:var(--card); border-radius:14px}
    .status{font-size:22px; font-weight:800; padding:12px 14px; border-radius:12px; margin:12px 0 10px}
    .in{background:var(--in-bg); border:1px solid var(--in-border)}
    .out{background:var(--out-bg); border:1px solid var(--out-border)}
    .small{color:var(--muted); font-size:13px}
    code{background:var(--code); padding:2px 6px; border-radius:8px}

    table{width:100%; border-collapse:collapse}
    th,td{border-bottom:1px solid rgba(255,255,255,0.06); padding:10px 8px; text-align:left; vertical-align:top}
    th{background:var(--thead)}

    button{
      border:1px solid var(--border);
      background:transparent;
      color:var(--text);
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
    }
    button:hover{opacity:.9}

    .grid{display:grid; gap:14px; grid-template-columns: 1fr}
    @media (min-width: 860px){
      .grid{grid-template-columns: 1fr 1fr}
    }

    .panel{border:1px solid var(--border); border-radius:14px; padding:12px}

    /* Calendario mensual */
    .cal-head{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:10px}
    .cal-title{font-weight:800}
    .cal{width:100%; border-collapse:collapse}
    .cal th,.cal td{border:1px solid rgba(255,255,255,0.08); padding:8px; vertical-align:top}
    .cal th{background:var(--thead); font-size:12px; color:var(--muted)}
    .cal .daynum{font-weight:700; font-size:12px; opacity:.85}
    .chip{display:block; margin-top:6px; padding:6px 8px; border-radius:10px; border:1px solid var(--border); background:rgba(255,255,255,0.03); font-size:12px}
  </style>
</head>

<body>
  <div class="card">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
      <h1 style="margin:0">ðŸ“š Mis horarios</h1>
      <button id="themeBtn" type="button">ðŸŒ™ Oscuro</button>
    </div>

    <div id="status" class="status out">Cargandoâ€¦</div>
    <div class="small" style="margin-bottom:10px;">
      Zona horaria: <code>America/Argentina/Mendoza</code>
    </div>

    <!-- 1) Horario semanal desplegable -->
    <details id="scheduleDetails" open class="panel">
      <summary style="cursor:pointer; font-weight:800; margin:6px 0;">1) Horario semanal</summary>
      <table id="table">
        <thead>
          <tr><th>DÃ­a</th><th>Bloque</th><th>Ramo</th><th>Sala</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </details>

    <div class="grid" style="margin-top:14px;">
      <!-- 2) Contador hasta el prÃ³ximo parcial -->
      <div class="panel">
        <div style="font-weight:800; margin-bottom:8px;">2) PrÃ³ximo parcial</div>
        <div id="nextExam" style="font-size:18px; font-weight:800;">Cargandoâ€¦</div>
        <div id="nextExamMeta" class="small"></div>
      </div>

      <!-- 3) Calendario mensual -->
      <div class="panel">
        <div style="font-weight:800; margin-bottom:8px;">3) Calendario mensual (parciales)</div>

        <div class="cal-head">
          <button id="prevMonth" type="button">â—€</button>
          <div id="calMonthTitle" class="cal-title">â€”</div>
          <button id="nextMonth" type="button">â–¶</button>
        </div>

        <table class="cal" id="calendar">
          <thead>
            <tr>
              <th>Dom</th><th>Lun</th><th>Mar</th><th>MiÃ©</th><th>Jue</th><th>Vie</th><th>SÃ¡b</th>
            </tr>
          </thead>
          <tbody id="calendarBody"></tbody>
        </table>

        <div class="small" style="margin-top:8px;">
          Los parciales aparecen marcados. Puedes moverte entre meses con â—€ â–¶.
        </div>
      </div>
    </div>
  </div>

  <script src="schedule.js"></script>
</body>
</html>
